# LINE 訂單系統 — 操作指南

本指南說明**只使用 LINE** 與訂單系統互動的方式，客群為**老闆**與**消費者**，不含 Web 網頁操作。

---

## 一、首次使用：加入或建立世界

加入 LINE 官方帳號後，系統會顯示：

```
歡迎使用訂單系統 👋

請選擇你要做的事：
1️⃣ 加入既有世界
2️⃣ 建立新世界（當老闆）

請直接回覆 1 或 2
輸入「重來」可重新選擇
```

### 選項 1：加入既有世界（消費者）

1. 回覆 **`1`** 或 **「加入世界」**
2. 系統會問：**請輸入世界 ID**
3. 輸入**世界 ID**（如 `1`、`#000001`）或**世界代碼**（8 位，如 `ABC12345`）— 向老闆索取
4. 驗證成功即加入，並自動設為當前世界，可開始下單

**若輸入錯誤：** 系統會回「找不到這個世界」，可選擇重新輸入 ID 或改為建立新世界。輸入 **「重來」** 可回到最上方選單。

### 選項 2：建立新世界（老闆）

1. 回覆 **`2`** 或 **「建立新世界」**
2. 系統建立世界後會顯示 **世界代碼**（8 位，如 `ABC12345`），請記下以便分享給消費者
3. 系統會請你**設定訂單格式**，直接貼上你的格式，例如：

```
飲料:
  - 珍珠奶茶
  - 紅茶
  - 綠茶
```

或帶屬性（如甜度、冰塊）：

```
飲料:
  - 珍珠奶茶 微冰 微糖
  - 珍珠奶茶 少冰 半糖
  - 紅茶 去冰 無糖
```

4. 設定成功後世界即啟用，可開始記訂單；可把**世界 ID 或世界代碼**給消費者加入

**進入世界前通用指令：** 輸入 **「重來」** 可回到「1️⃣ 加入世界 / 2️⃣ 建立新世界」選單。

---

## 二、老闆建立菜單與菜單格式

系統**沒有分店**，菜單以**廠商/類別**為單位，底下為品項與數量。

### 2.1 建立新世界時一次貼上菜單

選「建立新世界」後，系統會請你**設定訂單格式**，此時直接貼上整份菜單即可（格式見下方）。

### 2.2 已有世界：一次貼上整份菜單（覆蓋目前菜單）

**僅老闆**可使用。在同一則訊息中：

1. 第一行輸入 **「設定菜單」** 或 **「更新菜單」**
2. 換行後貼上整份菜單（格式同建立世界時）

範例一則訊息：

```
設定菜單
飲料
  珍珠奶茶 10
  紅茶 5
  綠茶 3
便當
  雞腿飯 20
  排骨飯 15
```

送出後該世界的菜單會被覆蓋為上述內容。

### 2.3 菜單格式說明指令

輸入 **「菜單格式」** 或 **「菜單格式說明」**，系統會回覆完整格式規則與範例（老闆與消費者都可使用，方便查看）。

**格式要點：**

- **第一行**：廠商/類別名稱（不可縮排）
- **後續行**：品項名稱 數量（需縮排一至兩格，品項與數量用空格分隔）
- 或使用 **`- 品項名稱`**（數量為 0）
- 數量為正整數（1–999999）

**單一廠商範例：**

```
飲料
  珍珠奶茶 10
  紅茶 5
  綠茶 3
```

**多廠商範例：**

```
飲料
  珍珠奶茶 10
  紅茶 5
便當
  雞腿飯 20
  排骨飯 15
```

### 2.4 單筆增刪改（僅老闆）

- **新增品項**：`新增品項` → 換行 → 廠商名 → 換行 → 品項名稱 [數量]
- **刪除品項**：`刪除品項` → 換行 → 廠商名 → 換行 → 品項名稱
- **修改品項**：`修改品項` → 換行 → 廠商名 → 換行 → 舊品項名 → 換行 → 新品項名 [數量]

---

## 三、建立訂單（消費者下訂單）

在當前世界為**啟用**狀態下，傳送以下格式的訊息即可建立訂單。

### 基本格式

```
品項1 數量1
品項2 數量2
時間（可選，YYYY-MM-DD）
```

### 範例

```
大杯紙杯 100
小杯紙杯 50
```

```
紅茶茶包 200
綠茶茶包 150
2024-01-15
```

### 飲料店（帶屬性）

品項名稱可含屬性，**數量必須在最後**：

```
珍珠奶茶 微冰 微糖 5
珍珠奶茶 少冰 半糖 3
紅茶 去冰 無糖 2
```

**注意：** 系統會記錄你**當下的 LINE 顯示名稱**，老闆查詢時會顯示「誰點的」。

---

## 四、修改訂單

關鍵字：**「修改」** 或 **「改」**，接著兩行：品項名稱、數字變化。

### 格式

```
修改
品項名稱
數字變化
```

### 數字變化寫法

| 寫法 | 意思 |
|------|------|
| `+5` | 增加 5 個 |
| `-3` | 減少 3 個 |
| `=10` | 設為 10 個 |
| `5` | 視為增加 5（等同 +5） |

### 範例

```
修改
大杯紙杯
+10
```

```
改
紅茶茶包
-5
```

```
修改
珍珠奶茶 微冰 微糖
+2
```

**注意：** 修改後數量若為 0，該品項會自動從訂單中刪除。有屬性時必須寫**完整品項名稱**（含所有屬性）。

---

## 五、查詢訂單（一般）

可查**指定日期**的訂單。

### 格式

```
查詢
今天 或 日期(YYYY-MM-DD)
```

### 範例

```
查詢
今天
```

```
查詢
2024-01-15
```

日期可用 **「今天」** 或 **「今日」** 或 **`2024-01-15`**。

---

## 六、老闆查詢訂單明細（僅老闆）

**僅世界擁有者（老闆）** 可使用。會列出該日**所有訂單**，依廠商→品項分組，並顯示**誰點的**。

### 格式

```
老闆查詢
今天 或 日期(YYYY-MM-DD)
```

或簡寫：**「老闆查」** + 日期

### 範例

```
老闆查詢
今天
```

```
老闆查
2024-01-15
```

### 回覆範例

```
廠商A
    大杯紙杯 15 (小明、小華)
    小杯紙杯 10 (小明)
廠商B
    紅茶茶包 20 (阿中)
```

---

## 七、清理所有訂單（僅老闆）

**僅世界擁有者** 可執行。傳送以下**任一句**即可清空當前世界所有訂單：

- `清理訂單` / `清除訂單` / `清空訂單` / `刪除訂單`
- `清理` / `清除` / `清空`

---

## 八、世界管理（多世界）

### 查看所有已加入的世界

輸入以下**任一句**：

- **我的店家**
- **所有店家**
- **查看店家**

會列出：世界 ID、世界代碼、角色（老闆/消費者）、狀態、目前使用的世界標記。

### 查看當前世界

輸入 **「當前店家」** 或 **「目前店家」**，可看目前正在使用的世界資訊與可用功能。

### 切換世界

1. 輸入 **「切換世界」** 或 **「切換店家」** → 會列出可切換的世界
2. 輸入要切換的**世界 ID**（如 `1`）或**世界代碼**（如 `ABC12345`）
3. 或一次輸入：`切換世界 1`、`切換世界 ABC12345`

切換後，之後的記訂單、修改、查詢都會在該世界進行。

### 刪除/退出世界

- **消費者**：輸入 **「退出世界」** 或 **「離開世界」** → 列出可退出的世界 → 輸入世界 ID 或代碼即退出（僅解除綁定）。
- **老闆**：輸入 **「刪除世界」** 或 **「退出世界」** → 列出世界 → 輸入要刪除的世界 ID 或代碼 → 系統會提醒「刪除後該世界所有內容將永久刪除，無法復原」→ 請再輸入 **「確認刪除世界 [ID 或代碼]」** 才真正執行刪除。

**範例（老闆刪除世界）：**
1. 輸入 `刪除世界` → 看到列表與說明
2. 輸入 `1`（或該世界代碼）→ 系統回覆警告與「請輸入：確認刪除世界 1」
3. 輸入 `確認刪除世界 1` → 該世界及其所有內容（訂單、菜單、成員等）永久刪除

**注意：** 消費者退出後無法再操作該世界；若退出的是當前世界，系統會清除當前世界。老闆刪除後該世界不存在，所有成員都無法再進入。

---

## 九、幫助

輸入 **「幫助」**，系統會依你的身份顯示可用指令：

- **老闆**：記訂單、查訂單、修改訂單、老闆查詢、清理訂單、我的店家、當前店家、切換世界、刪除世界（需二次確認）、菜單格式、設定菜單、查看菜單、新增/刪除/修改品項
- **消費者**：記訂單、查訂單、修改訂單、我的店家、當前店家、切換世界、退出世界、菜單格式、查看菜單

---

## 十、常用指令速查

| 想做什麼 | 輸入範例 |
|----------|----------|
| 加入世界 | `1` 或 `加入世界`，再輸入世界 ID/代碼 |
| 建立新世界 | `2` 或 `建立新世界`，再貼上訂單格式 |
| 重選 | `重來` |
| 下訂單 | 品項 數量（每行一筆，可多行） |
| 改數量 | `修改` → 品項名 → `+5`/`-3`/`=10` |
| 查訂單 | `查詢` → 今天/日期 |
| 老闆彙總 | `老闆查詢` → 今天/日期 |
| 清空訂單 | `清理` 或 `清理訂單`（僅老闆） |
| 看所有世界 | `我的店家` |
| 看當前世界 | `當前店家` |
| 換世界 | `切換世界` 再輸入 ID 或代碼 |
| 消費者離開世界 | `退出世界` 再輸入 ID 或代碼 |
| 老闆刪除世界 | `刪除世界` → 輸入 ID/代碼 → `確認刪除世界 [ID/代碼]` |
| 菜單格式說明 | `菜單格式` |
| 整份更新菜單（老闆） | 第一行 `設定菜單`，換行貼上整份菜單 |
| 看指令 | `幫助` |

---

*本指南僅涵蓋 LINE 對話操作，客群為老闆與消費者；Web 網頁與 API 請參閱「使用說明」。*
